{% extends 'baseAdmin.html.twig' %}

{% block title %}Menu d'administration{% endblock %}

{% block content %}
	<div class="container-fluid">
	
	<div class="row">
		<h1 class="col-12 text-center my-5">Liste des évènements</h1>
	</div>
	
	<div class="row">
	
	<div class="col-12 col-md-8 mx-auto">
		
		
		{# Affichage nb d'articles #}
		<div class="row">
			<p class="col-12 text-center">Nombre total d'évènements
				: {{ events.getTotalItemCount() }}</p>
		</div>
		
		{# Affichage du menu de nav s'il y a des articles #}
		{% if events is not empty %}
			<div class="row">
				<div class="col-12 my-3 text-center">
					<div class="d-inline-block">
						{{ knp_pagination_render(events) }}
					</div>
				</div>
			</div>
		{% endif %}
		
		<div class="row">
			
			<div class="col-12 table-responsive">
				
				<table class="align-middle table table-striped table-hover">
					<thead>
					<tr>
						<th scope="col"></th>
						<th scope="col"></th>
						{#                    <th scope="col">ID</th> #}
						<th scope="col">{{ knp_pagination_sortable(events,'Date ','a.eventDate') }}</th>
						<th scope="col">{{ knp_pagination_sortable(events, 'Description ','a.eventDescription')}}</th>
						<th scope="col"></th>
					</tr>
					</thead>
					<tbody>
					
					
					{% for event in events %}
						<tr>
							<th scope="row"></th>
							
							<td>{#                    todo:   {% if
							is_granted ('ROLE_ADMIN') %} #}
								
								<div class="mt-3">
									
									<a onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet évenement ?')"
									   href="{{ path('admin_panel_event_delete_', {'id': event.id, 'csrf_token' : csrf_token('admin_panel_event_delete_' ~ event.id)}) }}"
									   class="text-decoration-none text-danger">
										<i class="fa-solid fa-trash-can"></i>
										Supprimer </a>
								
								</div>
								
								{#                            {% endif %} #}
							</td>
							<td>{{ event.eventDate|date('d/m/y à H\\hi') }}</td>
							<td>{{ event.eventDescription }}</td>
							<td>
								{#                                    {% if is_granted('ROLE_ADMIN') %} #}
								
								<div class="mt-3">
									
									<a class="text-decoration-none text-warning me-3"
									   href="{{ path('admin_panel_event_edit_', {'id': event.id}) }}">
										<i class="fa-solid fa-pen-to-square"></i>
										Modifier </a>
								
								
								</div>
								{#  {% endif %} #}
							</td>
						</tr>
						{#                        {{ event.id }} #}
					
					
					
					{% else %}
						
						<div class="row">
							<p class="col-12 text-center alert alert-warning">
								Aucun evenement à afficher.</p>
						</div>
					
					{% endfor %}
				
				</table>
			</div>
		
		</div>
	</div>
{% endblock %}